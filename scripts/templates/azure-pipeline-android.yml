- job: Android
  pool:
    vmImage: 'Ubuntu 16.04'
  steps:
  - script: |
      sudo add-apt-repository ppa:ubuntu-toolchain-r/test -y
      sudo apt-get update -y
      sudo apt-get install g++-7 -y
      sudo apt-get install ragel
      ./bootstrap-vcpkg.sh
      export VCPKG_DEFAULT_TRIPLET="arm-android"
      export ANDROID_NDK_HOME=$ANDROID_ROOT_SDK/ndk-bundle
      ./vcpkg install $(cat ${{ parameters.packageListsFile }} )
      ./vcpkg export --output=android-arm --zip $(cat ${{ parameters.packageListsFile }} )
    displayName: 'make'
  - task: PublishBuildArtifacts@1
    inputs:
      pathtoPublish: 'android-arm.zip'
